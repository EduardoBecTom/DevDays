# Tareas entregable nivel 0

## 1. Implementación del put

En primer lugar, en **user.service.js** defino y exporto la función "updateUser", la cuál toma un id y la información del usuario y actualiza nuestra memoria con los datos proporcionados, en nuestro caso el único dato que tiene sentido que sea modificado es el nombre.
``` 
export const updateUser = (id, userData) =>{
    const user = users.find(u => u.id === id);
    if(user){
        user.name = userData.name || user.name;
        return user;
    }
}
```
A continuación, importamos nuestra función "updateUser" en nuestro archivo **user.controller.js**, la cuál utilizaremos en la función que hemos llamado "modifyUser", la cuál tomará el id de los parámetros de la URL y la información del cuerpo de la petición y llamará a nuestra función anteriormente mencionada

```
import { getAllUsers, getUserById, createUser, deleteUser, updateUser } from '../services/user.service.js';

export const modifyUser = (req, res) => {
    try{
        const {id} = req.params;
        const updatedUser = updateUser(id, req.body);
        if(updatedUser){
            res.status(200).json(updatedUser);
        } else {
            res.status(404).json({ message: 'User not found' });
        }
    } catch (error) {
        res.status(500).json({ message: 'Internal server error' });
    }
}
```
Por último, en nuestro archivo **user.routes.js** importamos nuestra función "modifyUser" y añadiremos nuestro endpoint PUT

```
import { addUser, getUser, getUsers, removeUser, modifyUser } from "../controllers/user.controller.js";

userRouter.put('/users/:id', modifyUser);
```
## 2. Modificación del middleware

Para añadir el máximo de 50 caracteres cuando se haga POST a nuestro endpoint, debemos añadir el siguiente fragmento de código a las restricciones de nuestro 'name'

```
.isLength({ max: 50 }).withMessage('Name must be at most 50 characters long')
```
## 3. Añadir fecha de actualización al esquema

Para añadir la fecha de actualización al esquema de nuestras issues, en nuestro archivo **issue.model.js** añadimos el siguiente elemento a nuestro JSON
```
updatedAt: {
        type: Date,
        required: true,
    }
```

## 4. Almacenar la fecha de actualización de los issue

Para almacenar la fecha de actualización, debemos modificar la función "saveIssues" dentro de nuestro archivo **issue.service.js** sustituyendo la constante newIssue por la siguiente:

```
const newIssue = {
                issueId: issueData.id,
                number: issueData.number,
                title: issueData.title,
                body: issueData.body,
                url: issueData.html_url,
                state: issueData.state,
                createdAt: issueData.created_at,
                updatedAt: issueData.updated_at,
            };
```